# Videogame Moment Space - A Visualization of Thousands of Moments in Games


![Main page example](https://xiaoxuan-zhang.github.io/Videogame_Moment_Visualization/pic/background.png)

Moments in this visualization are screenshots captured consecutively (n per second) from videogames played through different approaches (human, speedrun, autoplay). We get the vector embeddings of these screenshots from our trained models, and then use tSNE to map these high-dimensional vectors into 2D/3D space for visualization. The 3D scene is created using Three.js.

To explore videogame moment space, please click: [Videogame Moment Space](https://xiaoxuan-zhang.github.io/Videogame_Moment_Visualization)

To read more about this visualization, please visit [my blog](https://zooeytheengineer.wordpress.com/).

To run this visualization locally, go through section 2, 5, 6.

To add more data into this visualization, go through all the sections below.

## 1. Getting Started
To add a new corpus or game into this visualization, we will need to preprocess the data by running a python script in Jupyter Notebook. Here is a list of prerequisites:

* [Jupyter Notebook](http://jupyter.org/)
* Python 3
  * Python 3 libraries
    * [Scipy](https://www.scipy.org/) 0.19.1
    * [Pillow](https://pillow.readthedocs.io/en/5.1.x/) 5.1.0
    * [scikit-learn](http://scikit-learn.org/stable/) 0.19.1
    * [moviepy](https://zulko.github.io/moviepy/) 0.2.3.4

## 2. Setup a working directory
Clone or Download the code to a local folder, and this folder will be the root path for our server.
In this folder, you will find the following folders:
  * Game_data - All of our raw data including screenshots and vector embeddings goes into this folder.
  * pic - for storing files that are generated by our python script

## 3. Prepare the data
We need both screenshots and their vector embeddings for this visualization. All of the data should be put into the "Game_data" folder. Each game can have different corpora representing different types of game play, and each corpus should include two datasets: screenshots and embeddings. Accordingly, our folders are such arranged. Take one of our game collections "Super Mario World (USA)" for example, "human" and "algorithm" are two folders, inside of which is the data collected from human play and auto-play respectively:
  - Super Mario World (USA)
    - human
      - screenshots
      - embeddings
    - algorithm
      - screenshots
      - embeddings
If we want to add a new corpus of data collected from the game's attract mode, we can create a new folder called "attract-mode" so that it now looks like this:
  - Super Mario World (USA)
    - human
      - screenshots
      - embeddings
    - algorithm
      - screenshots
      - embeddings
    - attract-mode
      - screenshots
      - embeddings

After we have the screenshots and embeddings in the right place, we can continue to the next step.

## 4. Process the data

* Step 1: Open Jupyter Notebook<br>
  Once Jupyter Notebook is successfully installed, cd to your root directory mentioned above in the terminal, and then type in "jupyter notebook". A new page will automatically pop up in your default browser showing a list of files and folders in your root directory.

* Step 2: Run python script<br>
  Find "Visualizer-preprocessor.ipynb" and click to open it in a new tab. Instructions are shown at the beginning of this script. Follow all the steps and then run the script.

* Step 3: Check the generated data<br>
  If the script is successfully executed, we should be able to find our new game or corpus in gameinfo.json (located in the root path). It will also generate a JSON file and a folder in the output dir that we set earlier in the script. Inside that folder, there should be a PNG, a bin file and a video. That's all we need.

## 5. Setup local server
Now that the data is ready, we still need a local server to run this visualization on our computer. Note that SimpleHTTPServer and http.server don't support video streaming. So if you are using these servers, you won't be able to playback the video frame by frame. That is to say, most of our animation functions including playing between startId and stopId, jump back and jump forward will be invalid. However, other main functions should be all right.

* Python 2 SimpleHTTPServer:<br>
  In terminal, cd to root path, type in  python -m SimpleHTTPServer 7777
* Python 3 http.server:<br>
  In terminal, cd to root path, type in python3 -m http.server 7777
* lighttpd: check [here](http://redmine.lighttpd.net/projects/lighttpd/wiki/TutorialConfiguration).

Port 7777 is only a demo number, choose your own port number as long as it won't conflict with other applications.

## 6. On the main page
After running the local server, you can access our main page at "localhost:7777". There are two buttons on that page. A toggle button for switching between 2D/3D according to what you generated earlier using the python script (you can generate both 2D/3D coordinates).  A dropdown button that allows you to choose a game to enter the space.
